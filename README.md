# ğŸŸ SAKANA AI

ç¾å®¹å®¤ãƒ»ã‚µãƒ­ãƒ³å‘ã‘çµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆFlutter Ã— Next.js Ã— Firebaseï¼‰

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰
```bash
git clone https://github.com/sakanahair/base.git SAKANA_AI && cd SAKANA_AI && ./setup.sh
```

30ç§’ã§é–‹ç™ºç’°å¢ƒãŒæ•´ã„ã¾ã™ï¼

## ğŸ“‹ ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [æ©Ÿèƒ½](#æ©Ÿèƒ½)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
- [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
- [é–‹ç™º](#é–‹ç™º)
- [ãƒ‡ãƒ—ãƒ­ã‚¤](#ãƒ‡ãƒ—ãƒ­ã‚¤)
- [ãƒ‡ãƒ¼ã‚¿ç®¡ç†](#ãƒ‡ãƒ¼ã‚¿ç®¡ç†)
- [ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](#ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ)

## ğŸ¯ æ¦‚è¦

SAKANA AIã¯ã€ç¾å®¹å®¤ãƒ»ã‚µãƒ­ãƒ³å‘ã‘ã®çµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚é¡§å®¢ç®¡ç†ã€äºˆç´„ç®¡ç†ã€ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†ãªã©ã‚’ä¸€å…ƒåŒ–ã—ã€æ¥­å‹™åŠ¹ç‡ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã¾ã™ã€‚

### ç‰¹å¾´
- **ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: iOS/Android/Webå¯¾å¿œ
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**: Firebaseã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã®å³æ™‚åŒæœŸ
- **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ**: ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§å¿«é©ãªæ“ä½œ
- **ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ**: è¤‡æ•°åº—èˆ—ã®ç®¡ç†ã«å¯¾å¿œ
- **è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤**: ConoHa VPSã¸ã®ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤

## âœ¨ æ©Ÿèƒ½

### ç®¡ç†æ©Ÿèƒ½
- **é¡§å®¢ç®¡ç†**: é¡§å®¢æƒ…å ±ã€æ–½è¡“å±¥æ­´ã€ã‚¿ã‚°ç®¡ç†
- **ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†**: ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ä¾¡æ ¼ã€ç”»åƒç®¡ç†
- **äºˆç´„ç®¡ç†**: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼
- **ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†**: æ¨©é™ç®¡ç†ã€ã‚·ãƒ•ãƒˆç®¡ç†
- **å£²ä¸Šåˆ†æ**: ãƒ¬ãƒãƒ¼ãƒˆã€ã‚°ãƒ©ãƒ•è¡¨ç¤º

### æŠ€è¡“çš„ç‰¹å¾´
- **Firebaseå„ªå…ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ãƒ‡ãƒ¼ã‚¿ã®ä¸€è²«æ€§ã‚’ä¿è¨¼
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**: è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹é–“ã§ã®å³æ™‚åæ˜ 
- **ãƒ†ãƒ¼ãƒè¨­å®šå…±æœ‰**: åŒä¸€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§è‰²è¨­å®šã‚’å…±é€šåŒ–
- **ç”»åƒæœ€é©åŒ–**: è‡ªå‹•åœ§ç¸®ã€CDNé…ä¿¡

## ğŸ— ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚»ã‚¹                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Cloudflare (CDN/WAF/Cache)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ConoHa VPS (dev.sakana.hair)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     Nginx (Reverse Proxy)           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â†“            â†“                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Next.js    â”‚  â”‚  Flutter Web â”‚       â”‚
â”‚  â”‚   (Port 3000)â”‚  â”‚   (/admin)   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Firebase Services              â”‚
â”‚  â”œâ”€ Authentication (èªè¨¼)                   â”‚
â”‚  â”œâ”€ Firestore (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)                â”‚
â”‚  â””â”€ Storage (ç”»åƒãƒ»ãƒ•ã‚¡ã‚¤ãƒ«)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼ˆ2025å¹´1æœˆæ”¹è¨‚ï¼‰
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ
    â†“
Firebaseï¼ˆçœŸå®Ÿã®æºï¼‰
    â†“
ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒªã‚¹ãƒŠãƒ¼
    â†“
LocalStorageï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
    â†“
UIæ›´æ–°
```

**é‡è¦**: FirebaseãŒå˜ä¸€ã®çœŸå®Ÿã®æºï¼ˆSingle Source of Truthï¼‰ã§ã™ã€‚

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Flutter Web**: ç®¡ç†ç”»é¢ï¼ˆ/adminï¼‰
- **Next.js 14**: ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ã€ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°
- **TypeScript**: å‹å®‰å…¨æ€§
- **Tailwind CSS**: ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Firebase Auth**: èªè¨¼ãƒ»æ¨©é™ç®¡ç†
- **Cloud Firestore**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Firebase Storage**: ç”»åƒãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
- **Cloud Functions**: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹å‡¦ç†

### ã‚¤ãƒ³ãƒ•ãƒ©
- **ConoHa VPS**: ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
- **Cloudflare**: CDNã€WAFã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **Nginx**: ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·
- **PM2**: ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†
- **Mutagen**: ãƒ•ã‚¡ã‚¤ãƒ«åŒæœŸ

## ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ç®¡ç†

### Firebaseå„ªå…ˆã®åŸå‰‡ï¼ˆ2025å¹´1æœˆå®Ÿè£…ï¼‰

#### 1. èª­ã¿å–ã‚Š
```dart
// Firebaseã‹ã‚‰ç›´æ¥èª­ã¿è¾¼ã¿
await loadFromFirebase();
// LocalStorageã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ã¿
if (offline) await loadFromLocalStorage();
```

#### 2. æ›¸ãè¾¼ã¿
```dart
// å¿…ãšFirebaseã«å…ˆã«ä¿å­˜
await saveToFirebase(data);
// æˆåŠŸå¾Œã«LocalStorageã‚’æ›´æ–°
await updateLocalCache(data);
```

#### 3. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
```dart
// Firestoreãƒªã‚¹ãƒŠãƒ¼ã§è‡ªå‹•åŒæœŸ
FirebaseFirestore.instance
  .collection('data')
  .snapshots()
  .listen((snapshot) => updateLocalFromFirebase(snapshot));
```

### ãƒ†ãƒŠãƒ³ãƒˆæ§‹é€ 
```
tenants/
  â””â”€â”€ [uid]/
      â”œâ”€â”€ services/    # ã‚µãƒ¼ãƒ“ã‚¹æƒ…å ±
      â”œâ”€â”€ customers/   # é¡§å®¢æƒ…å ±
      â””â”€â”€ settings/    # è¨­å®šæƒ…å ±
          â””â”€â”€ theme/   # ãƒ†ãƒ¼ãƒè¨­å®šï¼ˆå…±æœ‰ï¼‰
```

## ğŸš€ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### å¿…è¦è¦ä»¶
- Node.js 18+
- Flutter 3.0+
- Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- ConoHa VPSï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/yourusername/sakana-ai.git
cd sakana-ai

# è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
./setup.sh

# ã¾ãŸã¯æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
cd flutter && flutter pub get
cd ../next && npm install
```

### ç’°å¢ƒå¤‰æ•°
```bash
# .env.local
NEXT_PUBLIC_FIREBASE_API_KEY=your_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_auth_domain
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
```

## ğŸ”§ é–‹ç™º

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
```bash
# Next.js
cd next && npm run dev

# Flutter
cd flutter && flutter run -d chrome --web-port=5001
```

### ãƒ“ãƒ«ãƒ‰
```bash
# Flutter Web
cd flutter && flutter build web --base-href /admin/

# Next.js
cd next && npm run build
```

## ğŸ“¦ ãƒ‡ãƒ—ãƒ­ã‚¤

### è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
./scripts/deploy.sh
```

### æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# ãƒ“ãƒ«ãƒ‰
cd flutter && flutter build web --base-href /admin/
cd ../next && npm run build

# MutagenåŒæœŸ
mutagen sync create . root@your-server:/var/www/sakana

# ã‚µãƒ¼ãƒãƒ¼ã§PM2èµ·å‹•
pm2 start ecosystem.config.js
```

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### é–‹ç™ºè€…å‘ã‘
- [CLAUDE.md](./CLAUDE.md) - AIé–‹ç™ºã‚¬ã‚¤ãƒ‰ã€æŠ€è¡“çš„æ±ºå®šäº‹é …
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸](./docs/architecture.md)
- [APIä»•æ§˜æ›¸](./docs/api.md)

### é‹ç”¨è€…å‘ã‘
- [é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«](./docs/operation.md)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](./docs/troubleshooting.md)

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- Firebase Security Rules ã«ã‚ˆã‚‹å³æ ¼ãªã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- Cloudflare WAF ã«ã‚ˆã‚‹æ”»æ’ƒé˜²å¾¡
- ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹æ©Ÿå¯†æƒ…å ±ç®¡ç†
- HTTPSå¿…é ˆ

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

Proprietary - All Rights Reserved

## ğŸ¤ è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ã€‚å¤§ããªå¤‰æ›´ã®å ´åˆã¯ã€ã¾ãšissueã‚’é–‹ã„ã¦å¤‰æ›´å†…å®¹ã‚’è­°è«–ã—ã¦ãã ã•ã„ã€‚

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

- GitHub Issues: ãƒã‚°å ±å‘Šã€æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- Email: support@sakana.hair

---

æœ€çµ‚æ›´æ–°: 2025å¹´1æœˆ14æ—¥
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 2.0.0